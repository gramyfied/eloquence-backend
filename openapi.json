{"openapi":"3.1.0","info":{"title":"Eloquence Backend","description":"Backend pour l'application Eloquence de coaching vocal","version":"1.0.0"},"paths":{"/":{"get":{"summary":"Root","description":"Route de base pour vérifier que l'application fonctionne.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health","description":"Route de santé pour vérifier que l'application fonctionne correctement.","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/chat/":{"post":{"tags":["chat"],"summary":"Chat","description":"Envoie un message au chatbot et reçoit une réponse.","operationId":"chat_chat__post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/coaching/init":{"get":{"tags":["coaching"],"summary":"Init Coaching","description":"Initialise une session de coaching.","operationId":"init_coaching_coaching_init_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"string","description":"ID de l'utilisateur","title":"User Id"},"description":"ID de l'utilisateur"},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/coaching/exercise/generate":{"post":{"tags":["coaching"],"summary":"Generate Exercise","description":"Génère un exercice de coaching.","operationId":"generate_exercise_coaching_exercise_generate_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExerciseRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExerciseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/session/start":{"post":{"tags":["session"],"summary":"Start Session","description":"Démarre une nouvelle session de coaching vocal.\nValide le scenario_id, génère un ID de session et retourne l'URL WebSocket et le message initial.\nV3 - Logique restaurée (lecture fichier JSON), sans création DB/Orchestrator.","operationId":"start_session_api_session_start_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionStartRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionStartResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/session/{session_id}/feedback":{"get":{"tags":["session"],"summary":"Get Session Feedback","description":"Récupère les résultats d'analyse Kaldi pour une session.\nPeut être filtré par segment_id ou type de feedback.","operationId":"get_session_feedback_api_session__session_id__feedback_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}},{"name":"segment_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Segment Id"}},{"name":"feedback_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Feedback Type"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/session/{session_id}/end":{"post":{"tags":["session"],"summary":"End Session","description":"Termine une session de coaching vocal et génère un résumé final.","operationId":"end_session_api_session__session_id__end_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionEndResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tts":{"post":{"tags":["audio"],"summary":"Synthesize Text","description":"Synthétise du texte en audio.","operationId":"synthesize_text_api_tts_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"text","in":"query","required":true,"schema":{"type":"string","description":"Texte à synthétiser","title":"Text"},"description":"Texte à synthétiser"},{"name":"voice","in":"query","required":false,"schema":{"type":"string","description":"Voix à utiliser","default":"default","title":"Voice"},"description":"Voix à utiliser"},{"name":"emotion","in":"query","required":false,"schema":{"type":"string","description":"Émotion à exprimer","default":"neutre","title":"Emotion"},"description":"Émotion à exprimer"},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/stt":{"post":{"tags":["audio"],"summary":"Transcribe Audio","description":"Transcrit un fichier audio en texte.\nAccepte soit un fichier audio téléchargé, soit l'ID d'un fichier audio existant.","operationId":"transcribe_audio_api_stt_post","parameters":[{"name":"audio_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"ID d'un fichier audio existant","title":"Audio Id"},"description":"ID d'un fichier audio existant"},{"name":"language","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Langue de l'audio","default":"fr","title":"Language"},"description":"Langue de l'audio"},{"name":"current_user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current User Id"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_transcribe_audio_api_stt_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/audio/{filename}":{"get":{"tags":["audio"],"summary":"Get Audio File","description":"Récupère un fichier audio par son nom.","operationId":"get_audio_file_api_audio__filename__get","parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string","title":"Filename"}},{"name":"current_user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/monitoring/latency":{"get":{"tags":["monitoring"],"summary":"Monitoring Latency","description":"Récupère les statistiques de latence.\n\nArgs:\n    session_id: Identifiant de la session pour filtrer les statistiques\n    \nReturns:\n    Dict[str, Any]: Statistiques de latence","operationId":"monitoring_latency_api_monitoring_latency_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"session_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/monitoring/status":{"get":{"tags":["monitoring"],"summary":"Monitoring Status","description":"Récupère l'état des services.\n\nReturns:\n    Dict[str, Any]: État des services","operationId":"monitoring_status_api_monitoring_status_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scenarios/":{"get":{"tags":["scenarios"],"summary":"List Scenarios","description":"Liste tous les scénarios disponibles en lisant les fichiers JSON du répertoire 'examples'.","operationId":"list_scenarios_api_scenarios__get","parameters":[{"name":"type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrer par type de scénario","title":"Type"},"description":"Filtrer par type de scénario"},{"name":"difficulty","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrer par difficulté","title":"Difficulty"},"description":"Filtrer par difficulté"},{"name":"language","in":"query","required":false,"schema":{"type":"string","description":"Langue des scénarios","default":"fr","title":"Language"},"description":"Langue des scénarios"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ScenarioResponse"},"title":"Response List Scenarios Api Scenarios  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scenarios/{scenario_id}":{"get":{"tags":["scenarios"],"summary":"Get Scenario","description":"Récupère un scénario spécifique par son ID.","operationId":"get_scenario_api_scenarios__scenario_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"scenario_id","in":"path","required":true,"schema":{"type":"string","title":"Scenario Id"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Scenario Api Scenarios  Scenario Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/scenarios":{"post":{"tags":["scenarios"],"summary":"Create Scenario","description":"Crée un nouveau scénario.","operationId":"create_scenario_api_scenarios_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Scenario"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_transcribe_audio_api_stt_post":{"properties":{"audio_file":{"anyOf":[{"type":"string","format":"binary"},{"type":"null"}],"title":"Audio File","description":"Fichier audio à transcrire"}},"type":"object","title":"Body_transcribe_audio_api_stt_post"},"ChatRequest":{"properties":{"message":{"type":"string","title":"Message"},"context":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Context"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"},"history":{"anyOf":[{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array"},{"type":"null"}],"title":"History"}},"type":"object","required":["message"],"title":"ChatRequest"},"ChatResponse":{"properties":{"response":{"type":"string","title":"Response"},"emotion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Emotion"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}},"type":"object","required":["response"],"title":"ChatResponse"},"ExerciseRequest":{"properties":{"exercise_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Exercise Type","default":"diction"},"difficulty":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Difficulty","default":"medium"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","default":"fr"},"context":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Context"}},"type":"object","title":"ExerciseRequest"},"ExerciseResponse":{"properties":{"exercise_id":{"type":"string","title":"Exercise Id"},"title":{"type":"string","title":"Title"},"description":{"type":"string","title":"Description"},"instructions":{"type":"string","title":"Instructions"},"content":{"type":"string","title":"Content"}},"type":"object","required":["exercise_id","title","description","instructions","content"],"title":"ExerciseResponse"},"FeedbackResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"feedback_results":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Feedback Results"}},"type":"object","required":["session_id","feedback_results"],"title":"FeedbackResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ScenarioResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"type":{"type":"string","title":"Type"},"difficulty":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Difficulty"},"language":{"type":"string","title":"Language","default":"fr"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags"},"preview_image":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Preview Image"}},"type":"object","required":["id","name","description","type"],"title":"ScenarioResponse"},"SessionEndResponse":{"properties":{"message":{"type":"string","title":"Message"},"final_summary_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Final Summary Url"}},"type":"object","required":["message"],"title":"SessionEndResponse"},"SessionStartRequest":{"properties":{"scenario_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scenario Id"},"user_id":{"type":"string","title":"User Id"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","default":"fr"},"goal":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Goal"}},"type":"object","required":["user_id"],"title":"SessionStartRequest"},"SessionStartResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"websocket_url":{"type":"string","title":"Websocket Url"},"initial_message":{"additionalProperties":{"type":"string"},"type":"object","title":"Initial Message"}},"type":"object","required":["session_id","websocket_url","initial_message"],"title":"SessionStartResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"token"}}}}}}